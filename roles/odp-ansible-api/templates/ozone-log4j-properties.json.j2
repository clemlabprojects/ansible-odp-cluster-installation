{
	"Clusters": {
		"desired_configs": {
			"type": "ozone-log4j-om",
			"tag": "{{ range(00000000, 99999999) | random }}",
			"properties": {
        {% raw %}
        "content": "\n            ##           -----    Managed By Ambari ------           ##\n\n            # Licensed to the Apache Software Foundation (ASF) under one\n            # or more contributor license agreements.  See the NOTICE file\n            # distributed with this work for additional information\n            # regarding copyright ownership.  The ASF licenses this file\n            # to you under the Apache License, Version 2.0 (the\n            # \"License\"); you may not use this file except in compliance\n            # with the License.  You may obtain a copy of the License at\n            #\n            #  http://www.apache.org/licenses/LICENSE-2.0\n            #\n            # Unless required by applicable law or agreed to in writing,\n            # software distributed under the License is distributed on an\n            # \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n            # KIND, either express or implied.  See the License for the\n            # specific language governing permissions and limitations\n            # under the License.\n            #\n\n\n            # Define some default values that can be overridden by system properties\n            # To change daemon root logger use hadoop_root_logger in hadoop-env\n            hadoop.root.logger={{ozone_log_level}},console\n            hadoop.log.dir=.\n            hadoop.log.file=hadoop.log\n\n\n            # Define the root logger to the system property \"hadoop.root.logger\".\n            log4j.rootLogger=${hadoop.root.logger}, EventCounter\n\n            # Logging Threshold\n            log4j.threshhold={{ozone_log_level}}\n\n            #\n            # Daily Rolling File Appender\n            #\n\n            log4j.appender.DRFA=org.apache.log4j.DailyRollingFileAppender\n            log4j.appender.DRFA.File=${hadoop.log.dir}/${hadoop.log.file}\n\n            # Rollver at midnight\n            log4j.appender.DRFA.DatePattern=.yyyy-MM-dd\n\n            # 30-day backup\n            #log4j.appender.DRFA.MaxBackupIndex=30\n            log4j.appender.DRFA.layout=org.apache.log4j.PatternLayout\n\n            # Pattern format: Date LogLevel LoggerName LogMessage\n            log4j.appender.DRFA.layout.ConversionPattern=%d{ISO8601} %p %c: %m%n\n            # Debugging Pattern format\n            #log4j.appender.DRFA.layout.ConversionPattern=%d{ISO8601} %-5p %c{2} (%F:%M(%L)) - %m%n\n\n\n            #\n            # console\n            # Add \"console\" to rootlogger above if you want to use this\n            #\n\n            log4j.appender.console=org.apache.log4j.ConsoleAppender\n            log4j.appender.console.target=System.err\n            log4j.appender.console.layout=org.apache.log4j.PatternLayout\n            log4j.appender.console.layout.ConversionPattern=%d{yy/MM/dd HH:mm:ss} %p %c{2}: %m%n\n\n            #\n            # TaskLog Appender\n            #\n\n            #Default values\n            hadoop.tasklog.taskid=null\n            hadoop.tasklog.iscleanup=false\n            hadoop.tasklog.noKeepSplits=4\n            hadoop.tasklog.totalLogFileSize=100\n            hadoop.tasklog.purgeLogSplits=true\n            hadoop.tasklog.logsRetainHours=12\n\n            log4j.appender.TLA=org.apache.hadoop.mapred.TaskLogAppender\n            log4j.appender.TLA.taskId=${hadoop.tasklog.taskid}\n            log4j.appender.TLA.isCleanup=${hadoop.tasklog.iscleanup}\n            log4j.appender.TLA.totalLogFileSize=${hadoop.tasklog.totalLogFileSize}\n\n            log4j.appender.TLA.layout=org.apache.log4j.PatternLayout\n            log4j.appender.TLA.layout.ConversionPattern=%d{ISO8601} %p %c: %m%n\n\n            #\n            #Security audit appender\n            #\n            hadoop.security.logger={{ozone_log_level}},console\n            hadoop.security.log.maxfilesize={{ozone_security_log_max_backup_size}}MB\n            hadoop.security.log.maxbackupindex={{ozone_security_log_number_of_backup_files}}\n            log4j.category.SecurityLogger=${hadoop.security.logger}\n            hadoop.security.log.file=SecurityAuth.audit\n            log4j.additivity.SecurityLogger=false\n            log4j.appender.DRFAS=org.apache.log4j.DailyRollingFileAppender\n            log4j.appender.DRFAS.File=${hadoop.log.dir}/${hadoop.security.log.file}\n            log4j.appender.DRFAS.layout=org.apache.log4j.PatternLayout\n            log4j.appender.DRFAS.layout.ConversionPattern=%d{ISO8601} %p %c: %m%n\n            log4j.appender.DRFAS.DatePattern=.yyyy-MM-dd\n\n            log4j.appender.RFAS=org.apache.log4j.RollingFileAppender\n            log4j.appender.RFAS.File=${hadoop.log.dir}/${hadoop.security.log.file}\n            log4j.appender.RFAS.layout=org.apache.log4j.PatternLayout\n            log4j.appender.RFAS.layout.ConversionPattern=%d{ISO8601} %p %c: %m%n\n            log4j.appender.RFAS.MaxFileSize=${hadoop.security.log.maxfilesize}\n            log4j.appender.RFAS.MaxBackupIndex=${hadoop.security.log.maxbackupindex}\n\n            #\n            # hdfs audit logging\n            #\n            hdfs.audit.logger={{ozone_log_level}},console\n            log4j.logger.org.apache.hadoop.hdfs.server.namenode.FSNamesystem.audit=${hdfs.audit.logger}\n            log4j.additivity.org.apache.hadoop.hdfs.server.namenode.FSNamesystem.audit=false\n            log4j.appender.DRFAAUDIT=org.apache.log4j.DailyRollingFileAppender\n            log4j.appender.DRFAAUDIT.File=${hadoop.log.dir}/hdfs-audit.log\n            log4j.appender.DRFAAUDIT.layout=org.apache.log4j.PatternLayout\n            log4j.appender.DRFAAUDIT.layout.ConversionPattern=%d{ISO8601} %p %c{2}: %m%n\n            log4j.appender.DRFAAUDIT.DatePattern=.yyyy-MM-dd\n\n            #\n            # NameNode metrics logging.\n            # The default is to retain two namenode-metrics.log files up to 64MB each.\n            #\n            namenode.metrics.logger={{ozone_log_level}},NullAppender\n            log4j.logger.NameNodeMetricsLog=${namenode.metrics.logger}\n            log4j.additivity.NameNodeMetricsLog=false\n            log4j.appender.NNMETRICSRFA=org.apache.log4j.RollingFileAppender\n            log4j.appender.NNMETRICSRFA.File=${hadoop.log.dir}/namenode-metrics.log\n            log4j.appender.NNMETRICSRFA.layout=org.apache.log4j.PatternLayout\n            log4j.appender.NNMETRICSRFA.layout.ConversionPattern=%d{ISO8601} %m%n\n            log4j.appender.NNMETRICSRFA.MaxBackupIndex=1\n            log4j.appender.NNMETRICSRFA.MaxFileSize=64MB\n\n            #\n            # mapred audit logging\n            #\n            mapred.audit.logger={{ozone_log_level}},console\n            log4j.logger.org.apache.hadoop.mapred.AuditLogger=${mapred.audit.logger}\n            log4j.additivity.org.apache.hadoop.mapred.AuditLogger=false\n            log4j.appender.MRAUDIT=org.apache.log4j.DailyRollingFileAppender\n            log4j.appender.MRAUDIT.File=${hadoop.log.dir}/mapred-audit.log\n            log4j.appender.MRAUDIT.layout=org.apache.log4j.PatternLayout\n            log4j.appender.MRAUDIT.layout.ConversionPattern=%d{ISO8601} %p %c{2}: %m%n\n            log4j.appender.MRAUDIT.DatePattern=.yyyy-MM-dd\n\n            #\n            # Rolling File Appender\n            #\n\n            log4j.appender.RFA=org.apache.log4j.RollingFileAppender\n            log4j.appender.RFA.File=${hadoop.log.dir}/${hadoop.log.file}\n\n            # Logfile size and and 30-day backups\n            log4j.appender.RFA.MaxFileSize={{ozone_log_max_backup_size}}MB\n            log4j.appender.RFA.MaxBackupIndex={{ozone_log_number_of_backup_files}}\n\n            log4j.appender.RFA.layout=org.apache.log4j.PatternLayout\n            log4j.appender.RFA.layout.ConversionPattern=%d{ISO8601} %-5p %c{2} - %m%n\n            log4j.appender.RFA.layout.ConversionPattern=%d{ISO8601} %-5p %c{2} (%F:%M(%L)) - %m%n\n\n\n            # Custom Logging levels\n\n            hadoop.metrics.log.level={{ozone_log_level}}\n            #log4j.logger.org.apache.hadoop.mapred.JobTracker=DEBUG\n            #log4j.logger.org.apache.hadoop.mapred.TaskTracker=DEBUG\n            #log4j.logger.org.apache.hadoop.fs.FSNamesystem=DEBUG\n            log4j.logger.org.apache.hadoop.metrics2=${hadoop.metrics.log.level}\n\n            # Jets3t library\n            log4j.logger.org.jets3t.service.impl.rest.httpclient.RestS3Service=ERROR\n\n            #\n            # Null Appender\n            # Trap security logger on the hadoop client side\n            #\n            log4j.appender.NullAppender=org.apache.log4j.varia.NullAppender\n\n            #\n            # Event Counter Appender\n            # Sends counts of logging messages at different severity levels to Hadoop Metrics.\n            #\n            log4j.appender.EventCounter=org.apache.hadoop.log.metrics.EventCounter\n\n            # Removes \"deprecated\" messages\n            log4j.logger.org.apache.hadoop.conf.Configuration.deprecation=WARN\n\n            #\n            # HDFS block state change log from block manager\n            #\n            # Uncomment the following to suppress normal block state change\n            # messages from BlockManager in NameNode.\n            #log4j.logger.BlockStateChange=WARN\n\n            # Adding logging for 3rd party library\n            log4j.logger.org.apache.commons.beanutils=WARN\n        ",
        {% endraw %}
        "ozone_log_max_backup_size": "256",
        "ozone_log_number_of_backup_files": "10",
        "ozone_security_log_max_backup_size": "256",
        "ozone_security_log_number_of_backup_files": "20"
      }
    }
  }
}
