{
	"Clusters": {
		"desired_configs": {
			"type": "nifi-registry-identity-providers-env",
			"tag": "{{ range(00000000, 99999999) | random }}",
			"properties": { {% raw %}
        "content" : "\n<!--\n  ~ Licensed to the Apache Software Foundation (ASF) under one or more\n  ~ contributor license agreements.  See the NOTICE file distributed with\n  ~ this work for additional information regarding copyright ownership.\n  ~ The ASF licenses this file to You under the Apache License, Version 2.0\n  ~ (the \"License\"); you may not use this file except in compliance with\n  ~ the License.  You may obtain a copy of the License at\n  ~\n  ~     http://www.apache.org/licenses/LICENSE-2.0\n  ~\n  ~ Unless required by applicable law or agreed to in writing, software\n  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  ~ See the License for the specific language governing permissions and\n  ~ limitations under the License.\n  -->\n<!--\n    This file lists the login identity providers to use when running securely. In order\n    to use a specific provider it must be configured here and it's identifier\n    must be specified in the nifi.properties file.\n-->\n<identityProviders>\n    <!--\n        Identity Provider for users logging in with username/password against an LDAP server.\n\n        'Authentication Strategy' - How the connection to the LDAP server is authenticated. Possible\n            values are ANONYMOUS, SIMPLE, LDAPS, or START_TLS.\n\n        'Manager DN' - The DN of the manager that is used to bind to the LDAP server to search for users.\n        'Manager Password' - The password of the manager that is used to bind to the LDAP server to\n            search for users.\n\n        'TLS - Keystore' - Path to the Keystore that is used when connecting to LDAP using LDAPS or START_TLS.\n        'TLS - Keystore Password' - Password for the Keystore that is used when connecting to LDAP\n            using LDAPS or START_TLS.\n        'TLS - Keystore Type' - Type of the Keystore that is used when connecting to LDAP using\n            LDAPS or START_TLS (i.e. JKS or PKCS12).\n        'TLS - Truststore' - Path to the Truststore that is used when connecting to LDAP using LDAPS or START_TLS.\n        'TLS - Truststore Password' - Password for the Truststore that is used when connecting to\n            LDAP using LDAPS or START_TLS.\n        'TLS - Truststore Type' - Type of the Truststore that is used when connecting to LDAP using\n            LDAPS or START_TLS (i.e. JKS or PKCS12).\n        'TLS - Client Auth' - Client authentication policy when connecting to LDAP using LDAPS or START_TLS.\n            Possible values are REQUIRED, WANT, NONE.\n        'TLS - Protocol' - Protocol to use when connecting to LDAP using LDAPS or START_TLS. (i.e. TLS,\n            TLSv1.1, TLSv1.2, etc).\n        'TLS - Shutdown Gracefully' - Specifies whether the TLS should be shut down gracefully\n            before the target context is closed. Defaults to false.\n\n        'Referral Strategy' - Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.\n        'Connect Timeout' - Duration of connect timeout. (i.e. 10 secs).\n        'Read Timeout' - Duration of read timeout. (i.e. 10 secs).\n\n        'Url' - Space-separated list of URLs of the LDAP servers (i.e. ldap://<hostname>:<port>).\n        'User Search Base' - Base DN for searching for users (i.e. CN=Users,DC=example,DC=com).\n        'User Search Filter' - Filter for searching for users against the 'User Search Base'.\n            (i.e. sAMAccountName={0}). The user specified name is inserted into '{0}'.\n\n        'Identity Strategy' - Strategy to identify users. Possible values are USE_DN and USE_USERNAME.\n            The default functionality if this property is missing is USE_DN in order to retain\n            backward compatibility. USE_DN will use the full DN of the user entry if possible.\n            USE_USERNAME will use the username the user logged in with.\n        'Authentication Expiration' - The duration of how long the user authentication is valid\n            for. If the user never logs out, they will be required to log back in following\n            this duration.\n    -->\n    <!-- To enable the ldap-identity-provider remove 2 lines. This is 1 of 2.\n    <provider>\n        <identifier>ldap-provider</identifier>\n        <class>org.apache.nifi.registry.security.ldap.LdapIdentityProvider</class>\n        <property name=\"Authentication Strategy\">SIMPLE</property>\n\n        <property name=\"Manager DN\">cn=read-only-admin,dc=example,dc=com</property>\n        <property name=\"Manager Password\">password</property>\n\n        <property name=\"Referral Strategy\">FOLLOW</property>\n        <property name=\"Connect Timeout\">10 secs</property>\n        <property name=\"Read Timeout\">10 secs</property>\n\n        <property name=\"Url\">ldap://localhost:8389</property>\n        <property name=\"User Search Base\">dc=example,dc=com</property>\n        <property name=\"User Search Filter\">(uid={0})</property>\n\n        <property name=\"Identity Strategy\">USE_DN</property>\n\n        <property name=\"Authentication Expiration\">12 hours</property>\n    </provider>\n    To enable the ldap-identity-provider remove 2 lines. This is 2 of 2. -->\n\n    <!--\n    Identity Provider for users logging in with username/password against a Kerberos KDC server.\n\n    'Default Realm' - Default realm to provide when user enters incomplete user principal (i.e. NIFI.APACHE.ORG).\n    'Authentication Expiration' - The duration of how long the user authentication is valid for. If the user never logs out, they will be required to log back in following this duration.\n    -->\n    {% if not security_enabled %}\n    <!-- To enable the kerberos-identity-provider remove 2 lines. This is 1 of 2.\n    {% endif %}\n    <provider>\n        <identifier>kerberos-identity-provider</identifier>\n        <class>org.apache.nifi.registry.web.security.authentication.kerberos.KerberosIdentityProvider</class>\n        <property name=\"Default Realm\">{{nifi_registry_kerberos_realm}}</property>\n        <property name=\"Authentication Expiration\">{{nifi_registry_kerberos_authentication_expiration}}</property>\n        <property name=\"Enable Debug\">false</property>\n    </provider>\n    {% if not security_enabled %}\n    To enable the kerberos-provider remove 2 lines. This is 2 of 2. -->\n    {% endif %}\n</identityProviders>"
      } {% endraw %}
    }
  }
}
