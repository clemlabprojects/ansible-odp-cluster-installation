{
	"Clusters": {
		"desired_configs": {
			"type": "admin-logback",
			"tag": "{{ range(00000000, 99999999) | random }}",
			"properties": { {% raw %}
        "content" : "\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!--\n  Licensed to the Apache Software Foundation (ASF) under one or more\n  contributor license agreements...\n-->\n\n<configuration>\n  <appender name=\"xa_log_appender\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\">\n    <file>{{admin_log_dir}}/ranger-admin-${hostname}-${user}.log</file>\n    <append>true</append>\n    <encoder>\n      <pattern>%date [%thread] %level{5} [%file:%line] %msg%n</pattern>\n    </encoder>\n    <rollingPolicy class=\"ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy\">\n      <fileNamePattern>{{admin_log_dir}}/ranger-admin-${hostname}-${user}.log.%d{yyyy-MM-dd}.%i.gz</fileNamePattern>\n      <maxFileSize>{{ ranger_xa_logback_maxfilesize }}</maxFileSize>\n      <maxHistory>{{ ranger_xa_logback_maxbackupindex }}</maxHistory>\n      <cleanHistoryOnStart>true</cleanHistoryOnStart>\n    </rollingPolicy>\n  </appender>\n\n  <appender name=\"sql_appender\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\">\n    <file>{{admin_log_dir}}/ranger_admin_sql.log</file>\n    <append>true</append>\n    <encoder>\n      <pattern>%d [%t] %-5p %C{6} \\(%F:%L\\) %msg%n</pattern>\n    </encoder>\n    <rollingPolicy class=\"ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy\">\n      <fileNamePattern>{{admin_log_dir}}/ranger_admin_sql.log.%d{yyyy-MM-dd}.%i.gz</fileNamePattern>\n      <maxFileSize>{{ ranger_xa_logback_maxfilesize }}</maxFileSize>\n      <maxHistory>{{ ranger_xa_logback_maxbackupindex }}</maxHistory>\n      <cleanHistoryOnStart>true</cleanHistoryOnStart>\n    </rollingPolicy>\n  </appender>\n\n  <appender name=\"perf_appender\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\">\n    <file>{{admin_log_dir}}/ranger_admin_perf.log</file>\n    <append>true</append>\n    <encoder>\n      <pattern>%d [%t] %msg%n</pattern>\n    </encoder>\n    <rollingPolicy class=\"ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy\">\n      <fileNamePattern>{{admin_log_dir}}/ranger_admin_perf.log.%d{yyyy-MM-dd}.%i.gz</fileNamePattern>\n      <maxFileSize>{{ ranger_xa_logback_maxfilesize }}</maxFileSize>\n      <maxHistory>{{ ranger_xa_logback_maxbackupindex }}</maxHistory>\n      <cleanHistoryOnStart>true</cleanHistoryOnStart>\n    </rollingPolicy>\n  </appender>\n\n  <appender name=\"patch_logger\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\">\n    <append>true</append>\n    <file>{{admin_log_dir}}/ranger_db_patch.log</file>\n    <encoder>\n      <pattern>%d [%t] %-5p %C{6} \\(%F:%L\\) %msg%n</pattern>\n    </encoder>\n    <rollingPolicy class=\"ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy\">\n      <fileNamePattern>{{admin_log_dir}}/ranger_db_patch.log.%d{yyyy-MM-dd}.%i.gz</fileNamePattern>\n      <maxFileSize>{{ ranger_xa_logback_maxfilesize }}</maxFileSize>\n      <maxHistory>{{ ranger_xa_logback_maxbackupindex }}</maxHistory>\n      <cleanHistoryOnStart>true</cleanHistoryOnStart>\n    </rollingPolicy>\n  </appender>\n\n  <logger name=\"xa\" additivity=\"false\" level=\"info\">\n    <appender-ref ref=\"xa_log_appender\"/>\n  </logger>\n\n  <logger name=\"jdbc.connection\" additivity=\"false\" level=\"error\">\n    <appender-ref ref=\"sql_appender\"/>\n  </logger>\n\n  <logger name=\"com.mchange\" additivity=\"false\" level=\"warn\" />\n  <logger name=\"org.apache.ranger.perf\" additivity=\"false\" level=\"info\">\n    <appender-ref ref=\"perf_appender\"/>\n  </logger>\n\n  <logger name=\"jdbc.audit\" additivity=\"false\" level=\"error\">\n    <appender-ref ref=\"sql_appender\"/>\n  </logger>\n\n  <logger name=\"org.apache.ranger.patch\" additivity=\"false\" level=\"info\">\n    <appender-ref ref=\"patch_logger\"/>\n  </logger>\n\n  <logger name=\"jdbc.resultset\" additivity=\"false\" level=\"error\">\n    <appender-ref ref=\"sql_appender\"/>\n  </logger>\n\n  <logger name=\"org.springframework\" additivity=\"false\" level=\"warn\">\n    <appender-ref ref=\"patch_logger\"/>\n  </logger>\n\n  <logger name=\"jdbc.sqltiming\" additivity=\"false\" level=\"warn\">\n    <appender-ref ref=\"sql_appender\"/>\n  </logger>\n\n  <logger name=\"org.hibernate.SQL\" additivity=\"false\" level=\"warn\">\n    <appender-ref ref=\"sql_appender\"/>\n  </logger>\n\n  <logger name=\"org.apache.ranger\" additivity=\"false\" level=\"info\">\n    <appender-ref ref=\"xa_log_appender\"/>\n  </logger>\n\n  <logger name=\"jdbc.sqlonly\" additivity=\"false\" level=\"error\">\n    <appender-ref ref=\"sql_appender\"/>\n  </logger>\n\n  <root level=\"warn\">\n    <appender-ref ref=\"xa_log_appender\"/>\n  </root>\n</configuration>\n    ",
        "ranger_xa_logback_maxbackupindex" : "20",
        "ranger_xa_logback_maxfilesize" : "256"{% endraw %}
			}
		}
	}
}
